<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --dark: #1a1a2e;
            --light: #f8f9fa;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark), var(--secondary));
            color: var(--light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        header {
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--success), var(--primary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #ccc;
            margin-bottom: 20px;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .info-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--success);
        }
        
        .flag-container {
            height: 220px;
            margin: 25px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
            border: 2px dashed rgba(255, 255, 255, 0.2);
        }
        
        .flag {
            height: 160px;
            width: auto;
            max-width: 280px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            transition: all 0.5s ease;
            object-fit: cover;
        }
        
        .flag.hidden {
            opacity: 0;
            transform: scale(0.8);
        }
        
        .question-mark {
            font-size: 6rem;
            color: rgba(255, 255, 255, 0.2);
            position: absolute;
        }
        
        .timer-container {
            margin: 20px 0;
        }
        
        .timer {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--warning);
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
            min-width: 80px;
            transition: all 0.3s ease;
        }
        
        .timer.warning {
            color: var(--danger);
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        
        .result {
            font-size: 1.4rem;
            margin: 20px 0;
            min-height: 40px;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 25px 0;
        }
        
        .option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 18px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 70px;
        }
        
        .option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .correct {
            background: rgba(76, 175, 80, 0.3);
            border-color: var(--success);
            color: var(--success);
        }
        
        .incorrect {
            background: rgba(244, 67, 54, 0.3);
            border-color: var(--danger);
            color: var(--danger);
        }
        
        .controls {
            margin-top: 25px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        #next-btn {
            background: linear-gradient(135deg, var(--success), #2a9d8f);
        }
        
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--success), var(--primary));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--success);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .game-over {
            padding: 30px;
        }
        
        .final-score {
            font-size: 5rem;
            font-weight: bold;
            color: var(--success);
            margin: 20px 0;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .performance {
            font-size: 1.5rem;
            margin: 20px 0;
            padding: 15px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .flag {
                height: 130px;
            }
            
            .game-info {
                flex-direction: column;
                gap: 15px;
            }
        }
        
        .hint {
            font-size: 0.9rem;
            color: #aaa;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-flag"></i> Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„</h1>
            <p class="subtitle">Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ø±ÙØªÙƒ Ø¨Ø£Ø¹Ù„Ø§Ù… Ø§Ù„Ø¹Ø§Ù„Ù… - Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¹Ù„Ù… Ù„Ù…Ø¯Ø© Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·!</p>
        </header>
        
        <div class="game-info">
            <div class="info-item">
                <span>Ø§Ù„Ù†Ù‚Ø§Ø·</span>
                <span class="info-value" id="score">0</span>
            </div>
            <div class="info-item">
                <span>Ø§Ù„Ø³Ø¤Ø§Ù„</span>
                <span class="info-value" id="question-count">0/10</span>
            </div>
            <div class="info-item">
                <span>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</span>
                <span class="info-value" id="level">1</span>
            </div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>
        
        <div class="flag-container">
            <img id="flag" class="flag hidden" src="" alt="Ø¹Ù„Ù… Ø§Ù„Ø¯ÙˆÙ„Ø©">
            <div id="question-mark" class="question-mark">?</div>
        </div>
        
        <div class="timer-container">
            <div class="timer" id="timer">1</div>
        </div>
        
        <div class="result" id="result"></div>
        
        <div class="options-container" id="options-container">
            <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
        </div>
        
        <p class="hint"><i class="fas fa-lightbulb"></i> Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¹Ù„Ù… Ù„Ù…Ø¯Ø© Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·ØŒ Ù„Ø°Ø§ Ø§Ù†ØªØ¨Ù‡ Ø¬ÙŠØ¯Ø§Ù‹!</p>
        
        <div class="controls">
            <button id="start-btn">
                <i class="fas fa-play"></i> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©
            </button>
            <button id="next-btn" style="display: none;">
                <i class="fas fa-arrow-right"></i> Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
            </button>
        </div>
    </div>

    <script>
        // Ø¹Ù†Ø§ØµØ± DOM
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const flagElement = document.getElementById('flag');
        const questionMark = document.getElementById('question-mark');
        const optionsContainer = document.getElementById('options-container');
        const resultElement = document.getElementById('result');
        const scoreElement = document.getElementById('score');
        const questionCountElement = document.getElementById('question-count');
        const levelElement = document.getElementById('level');
        const timerElement = document.getElementById('timer');
        const progressElement = document.getElementById('progress');

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        let currentQuestion = {};
        let score = 0;
        let questionCount = 0;
        let totalQuestions = 10;
        let timer;
        let timerCount = 1;
        let canAnswer = false;
        let countries = [];
        let usedCountries = [];

        // Ù‚Ø§Ù…ÙˆØ³ ØªØ±Ø¬Ù…Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¯ÙˆÙ„ Ù…Ù† Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        const countryTranslations = {
            "Egypt": "Ù…ØµØ±",
            "Saudi Arabia": "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©",
            "United Arab Emirates": "Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª",
            "Kuwait": "Ø§Ù„ÙƒÙˆÙŠØª",
            "Qatar": "Ù‚Ø·Ø±",
            "Oman": "Ø¹Ù…Ø§Ù†",
            "Bahrain": "Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†",
            "Jordan": "Ø§Ù„Ø£Ø±Ø¯Ù†",
            "Lebanon": "Ù„Ø¨Ù†Ø§Ù†",
            "Syria": "Ø³ÙˆØ±ÙŠØ§",
            "Iraq": "Ø§Ù„Ø¹Ø±Ø§Ù‚",
            "Yemen": "Ø§Ù„ÙŠÙ…Ù†",
            "Libya": "Ù„ÙŠØ¨ÙŠØ§",
            "Tunisia": "ØªÙˆÙ†Ø³",
            "Algeria": "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±",
            "Morocco": "Ø§Ù„Ù…ØºØ±Ø¨",
            "Sudan": "Ø§Ù„Ø³ÙˆØ¯Ø§Ù†",
            "Somalia": "Ø§Ù„ØµÙˆÙ…Ø§Ù„",
            "Djibouti": "Ø¬ÙŠØ¨ÙˆØªÙŠ",
            "Mauritania": "Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§",
            "Palestine": "ÙÙ„Ø³Ø·ÙŠÙ†",
            "United States": "Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©",
            "United Kingdom": "Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©",
            "France": "ÙØ±Ù†Ø³Ø§",
            "Germany": "Ø£Ù„Ù…Ø§Ù†ÙŠØ§",
            "Italy": "Ø¥ÙŠØ·Ø§Ù„ÙŠØ§",
            "Spain": "Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§",
            "Brazil": "Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„",
            "Argentina": "Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†",
            "Canada": "ÙƒÙ†Ø¯Ø§",
            "Australia": "Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§",
            "Japan": "Ø§Ù„ÙŠØ§Ø¨Ø§Ù†",
            "China": "Ø§Ù„ØµÙŠÙ†",
            "Russia": "Ø±ÙˆØ³ÙŠØ§",
            "India": "Ø§Ù„Ù‡Ù†Ø¯",
            "Turkey": "ØªØ±ÙƒÙŠØ§",
            "Iran": "Ø¥ÙŠØ±Ø§Ù†",
            "Pakistan": "Ø¨Ø§ÙƒØ³ØªØ§Ù†",
            "Afghanistan": "Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†",
            "South Korea": "ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©",
            "North Korea": "ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©",
            "Finland": "ÙÙ†Ù„Ù†Ø¯Ø§",
            "Sweden": "Ø§Ù„Ø³ÙˆÙŠØ¯",
            "Norway": "Ø§Ù„Ù†Ø±ÙˆÙŠØ¬",
            "Denmark": "Ø§Ù„Ø¯Ù†Ù…Ø§Ø±Ùƒ",
            "Netherlands": "Ù‡ÙˆÙ„Ù†Ø¯Ø§",
            "Belgium": "Ø¨Ù„Ø¬ÙŠÙƒØ§",
            "Switzerland": "Ø³ÙˆÙŠØ³Ø±Ø§",
            "Austria": "Ø§Ù„Ù†Ù…Ø³Ø§",
            "Greece": "Ø§Ù„ÙŠÙˆÙ†Ø§Ù†",
            "Portugal": "Ø§Ù„Ø¨Ø±ØªØºØ§Ù„",
            "Mexico": "Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ",
            "Chile": "ØªØ´ÙŠÙ„ÙŠ",
            "Peru": "Ø¨ÙŠØ±Ùˆ",
            "Colombia": "ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠØ§",
            "Venezuela": "ÙÙ†Ø²ÙˆÙŠÙ„Ø§",
            "South Africa": "Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§",
            "Nigeria": "Ù†ÙŠØ¬ÙŠØ±ÙŠØ§",
            "Kenya": "ÙƒÙŠÙ†ÙŠØ§",
            "Ethiopia": "Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§",
            "Indonesia": "Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§",
            "Malaysia": "Ù…Ø§Ù„ÙŠØ²ÙŠØ§",
            "Thailand": "ØªØ§ÙŠÙ„Ø§Ù†Ø¯",
            "Vietnam": "ÙÙŠØªÙ†Ø§Ù…",
            "Philippines": "Ø§Ù„ÙÙ„Ø¨ÙŠÙ†",
            "New Zealand": "Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§",
            "Ireland": "Ø£ÙŠØ±Ù„Ù†Ø¯Ø§",
            "Poland": "Ø¨ÙˆÙ„Ù†Ø¯Ø§",
            "Ukraine": "Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§",
            "Czech Republic": "Ø§Ù„ØªØ´ÙŠÙƒ",
            "Romania": "Ø±ÙˆÙ…Ø§Ù†ÙŠØ§",
            "Hungary": "Ø§Ù„Ù…Ø¬Ø±",
            "Bulgaria": "Ø¨Ù„ØºØ§Ø±ÙŠØ§",
            "Serbia": "ØµØ±Ø¨ÙŠØ§",
            "Croatia": "ÙƒØ±ÙˆØ§ØªÙŠØ§",
            "Slovakia": "Ø³Ù„ÙˆÙØ§ÙƒÙŠØ§",
            "Slovenia": "Ø³Ù„ÙˆÙÙŠÙ†ÙŠØ§",
            "Estonia": "Ø¥Ø³ØªÙˆÙ†ÙŠØ§",
            "Latvia": "Ù„Ø§ØªÙÙŠØ§",
            "Lithuania": "Ù„ÙŠØªÙˆØ§Ù†ÙŠØ§",
            "Iceland": "Ø¢ÙŠØ³Ù„Ù†Ø¯Ø§",
            "Malta": "Ù…Ø§Ù„Ø·Ø§",
            "Cyprus": "Ù‚Ø¨Ø±Øµ",
            "Luxembourg": "Ù„ÙˆÙƒØ³Ù…Ø¨ÙˆØ±Øº",
            "Monaco": "Ù…ÙˆÙ†Ø§ÙƒÙˆ",
            "Andorra": "Ø£Ù†Ø¯ÙˆØ±Ø§",
            "Liechtenstein": "Ù„ÙŠØ®ØªÙ†Ø´ØªØ§ÙŠÙ†",
            "San Marino": "Ø³Ø§Ù† Ù…Ø§Ø±ÙŠÙ†Ùˆ",
            "Vatican City": "Ø§Ù„ÙØ§ØªÙŠÙƒØ§Ù†",
            "Bangladesh": "Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´",
            "Sri Lanka": "Ø³Ø±ÙŠÙ„Ø§Ù†ÙƒØ§",
            "Nepal": "Ù†ÙŠØ¨Ø§Ù„",
            "Bhutan": "Ø¨ÙˆØªØ§Ù†",
            "Maldives": "Ø¬Ø²Ø± Ø§Ù„Ù…Ø§Ù„Ø¯ÙŠÙ",
            "Myanmar": "Ù…ÙŠØ§Ù†Ù…Ø§Ø±",
            "Cambodia": "ÙƒÙ…Ø¨ÙˆØ¯ÙŠØ§",
            "Laos": "Ù„Ø§ÙˆØ³",
            "Mongolia": "Ù…Ù†ØºÙˆÙ„ÙŠØ§",
            "Kazakhstan": "ÙƒØ§Ø²Ø§Ø®Ø³ØªØ§Ù†",
            "Uzbekistan": "Ø£ÙˆØ²Ø¨ÙƒØ³ØªØ§Ù†",
            "Turkmenistan": "ØªØ±ÙƒÙ…Ø§Ù†Ø³ØªØ§Ù†",
            "Kyrgyzstan": "Ù‚ÙŠØ±ØºÙŠØ²Ø³ØªØ§Ù†",
            "Tajikistan": "Ø·Ø§Ø¬ÙŠÙƒØ³ØªØ§Ù†",
            "Armenia": "Ø£Ø±Ù…ÙŠÙ†ÙŠØ§",
            "Azerbaijan": "Ø£Ø°Ø±Ø¨ÙŠØ¬Ø§Ù†",
            "Georgia": "Ø¬ÙˆØ±Ø¬ÙŠØ§",
            "Belarus": "Ø¨ÙŠÙ„Ø§Ø±ÙˆØ³ÙŠØ§",
            "Moldova": "Ù…ÙˆÙ„Ø¯ÙˆÙØ§",
            "Albania": "Ø£Ù„Ø¨Ø§Ù†ÙŠØ§",
            "Bosnia and Herzegovina": "Ø§Ù„Ø¨ÙˆØ³Ù†Ø© ÙˆØ§Ù„Ù‡Ø±Ø³Ùƒ",
            "North Macedonia": "Ù…Ù‚Ø¯ÙˆÙ†ÙŠØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©",
            "Montenegro": "Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø£Ø³ÙˆØ¯",
            "Kosovo": "ÙƒÙˆØ³ÙˆÙÙˆ",
            "Israel": "Ø¥Ø³Ø±Ø§Ø¦ÙŠÙ„",
            "Singapore": "Ø³Ù†ØºØ§ÙÙˆØ±Ø©",
            "Taiwan": "ØªØ§ÙŠÙˆØ§Ù†",
            "Hong Kong": "Ù‡ÙˆÙ†Øº ÙƒÙˆÙ†Øº",
            "Macau": "Ù…Ø§ÙƒØ§Ùˆ",
            "Brunei": "Ø¨Ø±ÙˆÙ†Ø§ÙŠ",
            "Timor-Leste": "ØªÙŠÙ…ÙˆØ± Ø§Ù„Ø´Ø±Ù‚ÙŠØ©",
            "Papua New Guinea": "Ø¨Ø§Ø¨ÙˆØ§ ØºÙŠÙ†ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©",
            "Fiji": "ÙÙŠØ¬ÙŠ",
            "Solomon Islands": "Ø¬Ø²Ø± Ø³Ù„ÙŠÙ…Ø§Ù†",
            "Vanuatu": "ÙØ§Ù†ÙˆØ§ØªÙˆ",
            "Samoa": "Ø³Ø§Ù…ÙˆØ§",
            "Tonga": "ØªÙˆÙ†ØºØ§",
            "Kiribati": "ÙƒÙŠØ±ÙŠØ¨Ø§ØªÙŠ",
            "Marshall Islands": "Ø¬Ø²Ø± Ù…Ø§Ø±Ø´Ø§Ù„",
            "Palau": "Ø¨Ø§Ù„Ø§Ùˆ",
            "Micronesia": "Ù…ÙŠÙƒØ±ÙˆÙ†ÙŠØ²ÙŠØ§",
            "Nauru": "Ù†Ø§ÙˆØ±Ùˆ",
            "Tuvalu": "ØªÙˆÙØ§Ù„Ùˆ"
        };

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        startBtn.addEventListener('click', startGame);

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
        nextBtn.addEventListener('click', () => {
            if (questionCount < totalQuestions) {
                nextQuestion();
            } else {
                endGame();
            }
        });

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        async function startGame() {
            score = 0;
            questionCount = 0;
            scoreElement.textContent = score;
            questionCountElement.textContent = `${questionCount}/${totalQuestions}`;
            progressElement.style.width = '0%';
            levelElement.textContent = '1';
            
            startBtn.style.display = 'none';
            nextBtn.style.display = 'none';
            
            // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            resultElement.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¹Ù„Ø§Ù…...</p>
                </div>
            `;
            
            // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙˆÙ„ Ù…Ù† API
            await fetchCountries();
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            nextQuestion();
        }

        // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙˆÙ„ Ù…Ù† API
        async function fetchCountries() {
            try {
                const response = await fetch('https://restcountries.com/v3.1/all?fields=name,flags');
                const data = await response.json();
                
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù…Ø¹ Ø§Ù„ØªØ±Ø¬Ù…Ø© Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©
                countries = data.map(country => {
                    const englishName = country.name.common;
                    const arabicName = countryTranslations[englishName] || englishName;
                    
                    return {
                        name: arabicName,
                        originalName: englishName,
                        flag: country.flags.png
                    };
                }).filter(country => country.name !== country.originalName); // ØªØµÙÙŠØ© Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„ØªÙŠ Ù„Ù‡Ø§ ØªØ±Ø¬Ù…Ø©
                
                // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¯ÙˆÙ„ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
                countries = shuffleArray(countries);
                usedCountries = [];
                
            } catch (error) {
                console.error('Error fetching countries:', error);
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ API
                countries = getDefaultCountries();
            }
        }

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ API
        function getDefaultCountries() {
            return [
                { name: "Ù…ØµØ±", originalName: "Egypt", flag: "https://flagcdn.com/w320/eg.png" },
                { name: "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", originalName: "Saudi Arabia", flag: "https://flagcdn.com/w320/sa.png" },
                { name: "Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª", originalName: "United Arab Emirates", flag: "https://flagcdn.com/w320/ae.png" },
                { name: "Ø§Ù„ÙƒÙˆÙŠØª", originalName: "Kuwait", flag: "https://flagcdn.com/w320/kw.png" },
                { name: "Ù‚Ø·Ø±", originalName: "Qatar", flag: "https://flagcdn.com/w320/qa.png" },
                { name: "Ø¹Ù…Ø§Ù†", originalName: "Oman", flag: "https://flagcdn.com/w320/om.png" },
                { name: "Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†", originalName: "Bahrain", flag: "https://flagcdn.com/w320/bh.png" },
                { name: "Ø§Ù„Ø£Ø±Ø¯Ù†", originalName: "Jordan", flag: "https://flagcdn.com/w320/jo.png" },
                { name: "Ù„Ø¨Ù†Ø§Ù†", originalName: "Lebanon", flag: "https://flagcdn.com/w320/lb.png" },
                { name: "Ø³ÙˆØ±ÙŠØ§", originalName: "Syria", flag: "https://flagcdn.com/w320/sy.png" },
                { name: "Ø§Ù„Ø¹Ø±Ø§Ù‚", originalName: "Iraq", flag: "https://flagcdn.com/w320/iq.png" },
                { name: "Ø§Ù„ÙŠÙ…Ù†", originalName: "Yemen", flag: "https://flagcdn.com/w320/ye.png" },
                { name: "Ù„ÙŠØ¨ÙŠØ§", originalName: "Libya", flag: "https://flagcdn.com/w320/ly.png" },
                { name: "ØªÙˆÙ†Ø³", originalName: "Tunisia", flag: "https://flagcdn.com/w320/tn.png" },
                { name: "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", originalName: "Algeria", flag: "https://flagcdn.com/w320/dz.png" },
                { name: "Ø§Ù„Ù…ØºØ±Ø¨", originalName: "Morocco", flag: "https://flagcdn.com/w320/ma.png" },
                { name: "Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©", originalName: "United States", flag: "https://flagcdn.com/w320/us.png" },
                { name: "Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©", originalName: "United Kingdom", flag: "https://flagcdn.com/w320/gb.png" },
                { name: "ÙØ±Ù†Ø³Ø§", originalName: "France", flag: "https://flagcdn.com/w320/fr.png" },
                { name: "Ø£Ù„Ù…Ø§Ù†ÙŠØ§", originalName: "Germany", flag: "https://flagcdn.com/w320/de.png" },
                { name: "Ø¥ÙŠØ·Ø§Ù„ÙŠØ§", originalName: "Italy", flag: "https://flagcdn.com/w320/it.png" },
                { name: "Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§", originalName: "Spain", flag: "https://flagcdn.com/w320/es.png" },
                { name: "Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„", originalName: "Brazil", flag: "https://flagcdn.com/w320/br.png" },
                { name: "Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†", originalName: "Argentina", flag: "https://flagcdn.com/w320/ar.png" },
                { name: "ÙƒÙ†Ø¯Ø§", originalName: "Canada", flag: "https://flagcdn.com/w320/ca.png" },
                { name: "Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§", originalName: "Australia", flag: "https://flagcdn.com/w320/au.png" },
                { name: "Ø§Ù„ÙŠØ§Ø¨Ø§Ù†", originalName: "Japan", flag: "https://flagcdn.com/w320/jp.png" },
                { name: "Ø§Ù„ØµÙŠÙ†", originalName: "China", flag: "https://flagcdn.com/w320/cn.png" },
                { name: "Ø±ÙˆØ³ÙŠØ§", originalName: "Russia", flag: "https://flagcdn.com/w320/ru.png" },
                { name: "Ø§Ù„Ù‡Ù†Ø¯", originalName: "India", flag: "https://flagcdn.com/w320/in.png" }
            ];
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯
        function nextQuestion() {
            resetState();
            questionCount++;
            questionCountElement.textContent = `${questionCount}/${totalQuestions}`;
            progressElement.style.width = `${(questionCount / totalQuestions) * 100}%`;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªÙˆÙ‰
            levelElement.textContent = Math.ceil(questionCount / 2);
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø¯ÙˆÙ„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ù… ØªØ³ØªØ®Ø¯Ù… Ù…Ù† Ù‚Ø¨Ù„
            let availableCountries = countries.filter(country => !usedCountries.includes(country.name));
            if (availableCountries.length === 0) {
                // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ Ø¥Ø°Ø§ Ù†ÙØ°Øª
                usedCountries = [];
                availableCountries = countries;
            }
            
            const randomIndex = Math.floor(Math.random() * availableCountries.length);
            currentQuestion = availableCountries[randomIndex];
            usedCountries.push(currentQuestion.name);
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
            const options = getRandomOptions(currentQuestion.name);
            options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('option');
                button.textContent = option;
                button.addEventListener('click', selectAnswer);
                optionsContainer.appendChild(button);
            });
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù„Ù… ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ø§Ø³ØªÙÙ‡Ø§Ù…
            flagElement.classList.add('hidden');
            questionMark.style.display = 'block';
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù„Ù…
            startFlagTimer();
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù„Ù…
        function startFlagTimer() {
            timerCount = 1;
            timerElement.textContent = timerCount;
            timerElement.classList.remove('warning');
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù„Ù… Ù„Ù…Ø¯Ø© Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø©
            flagElement.src = currentQuestion.flag;
            flagElement.classList.remove('hidden');
            questionMark.style.display = 'none';
            
            timer = setInterval(() => {
                timerCount--;
                timerElement.textContent = timerCount;
                
                if (timerCount <= 0) {
                    clearInterval(timer);
                    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù„Ù… Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ©
                    flagElement.classList.add('hidden');
                    questionMark.style.display = 'block';
                    timerElement.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©';
                    timerElement.classList.add('warning');
                    canAnswer = true;
                }
            }, 1000);
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ø¤Ø§Ù„
        function resetState() {
            clearInterval(timer);
            resultElement.textContent = '';
            resultElement.style.background = 'transparent';
            optionsContainer.innerHTML = '';
            canAnswer = false;
            timerCount = 1;
            timerElement.textContent = timerCount;
            timerElement.classList.remove('warning');
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø®ÙŠØ§Ø±Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
        function getRandomOptions(correctAnswer) {
            const options = [correctAnswer];
            
            // Ø¥Ø¶Ø§ÙØ© 3 Ø®ÙŠØ§Ø±Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø£Ø®Ø±Ù‰
            while (options.length < 4) {
                const randomIndex = Math.floor(Math.random() * countries.length);
                const randomCountry = countries[randomIndex].name;
                
                if (!options.includes(randomCountry)) {
                    options.push(randomCountry);
                }
            }
            
            // Ø®Ù„Ø· Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
            return shuffleArray(options);
        }

        // Ø®Ù„Ø· Ø§Ù„Ù…ØµÙÙˆÙØ©
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        function selectAnswer(e) {
            if (!canAnswer) return;
            
            const selectedOption = e.target;
            const correct = selectedOption.textContent === currentQuestion.name;
            
            if (correct) {
                selectedOption.classList.add('correct');
                resultElement.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ğŸ‰';
                resultElement.style.background = 'rgba(76, 175, 80, 0.2)';
                resultElement.style.color = 'var(--success)';
                score++;
                scoreElement.textContent = score;
            } else {
                selectedOption.classList.add('incorrect');
                resultElement.textContent = `Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${currentQuestion.name}`;
                resultElement.style.background = 'rgba(244, 67, 54, 0.2)';
                resultElement.style.color = 'var(--danger)';
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                Array.from(optionsContainer.children).forEach(button => {
                    if (button.textContent === currentQuestion.name) {
                        button.classList.add('correct');
                    }
                });
            }
            
            canAnswer = false;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¹Ù„Ù… Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            flagElement.classList.remove('hidden');
            questionMark.style.display = 'none';
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ±
            setTimeout(() => {
                nextBtn.style.display = 'flex';
            }, 1000);
        }

        // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function endGame() {
            flagElement.classList.add('hidden');
            questionMark.style.display = 'block';
            questionMark.textContent = 'ğŸ';
            
            const percentage = (score / totalQuestions) * 100;
            let performanceMessage = '';
            
            if (percentage >= 90) {
                performanceMessage = 'Ù…Ø°Ù‡Ù„! Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ Ø£Ø¹Ù„Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„!';
            } else if (percentage >= 70) {
                performanceMessage = 'Ø£Ø­Ø³Ù†Øª! Ù…Ø¹Ø±ÙØ© Ø¬ÙŠØ¯Ø© Ø¨Ø£Ø¹Ù„Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„.';
            } else if (percentage >= 50) {
                performanceMessage = 'Ù„ÙŠØ³ Ø³ÙŠØ¦Ø§Ù‹! ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø±ÙØªÙƒ.';
            } else {
                performanceMessage = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„ØªØ­Ø³ÙŠÙ† Ù†ØªÙŠØ¬ØªÙƒ.';
            }
            
            resultElement.innerHTML = `
                <div class="game-over">
                    <h2>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>
                    <div class="final-score">${score}/${totalQuestions}</div>
                    <div class="performance">${performanceMessage}</div>
                </div>
            `;
            
            optionsContainer.innerHTML = '';
            nextBtn.style.display = 'none';
            startBtn.style.display = 'flex';
            startBtn.innerHTML = '<i class="fas fa-redo"></i> Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
            timerElement.textContent = '';
        }
    </script>
</body>
</html>
